# 💀 프로젝트 부검 보고서: 성공과 실패의 결정적 차이

**분석 대상**:

1. `FamilyQuestScheduler` (실패) ❌
2. `FamilyMissionManager` (성공) ✅

**작성자**: 에스텔 (Antigravity)
**작성일**: 2026년 1월 11일

---

## 1. 🔍 한 눈에 보는 코드 구조 (App.py)

가장 먼저 애플리케이션의 대문인 `app.py`를 열어보았습니다. 여기서 승패는 이미 결정되어 있었습니다.

| 비교 항목     | ❌ 실패작 (QuestScheduler)                             | ✅ 성공작 (MissionManager)                          |
| :------------ | :----------------------------------------------------- | :-------------------------------------------------- |
| **코드 길이** | **300줄** (비만형)                                     | **59줄** (근육질)                                   |
| **하는 일**   | DB연결, 로그인, CSS, 탭 화면 그리기 등 **혼자 다 함**. | 오직 **'방향 지시(Routing)'**만 함.                 |
| **복잡도**    | `if`문 안에 `if`문이 5단계 이상 중첩됨.                | 1단계 깊이에서 끝남.                                |
| **비유**      | 사장님이 청소, 요리, 배달까지 다 하는 분식집.          | 지배인은 안내만 하고, 각 분야 셰프가 요리하는 호텔. |

### 💀 실패작의 코드 패턴 (스파게티)

```python
# app.py (실패작)
if db.is_cloud:
    try:
        # DB 연결하고...
        # 유저 정보 가져오고...
        if credentials:
            # 로그인 시도하고...
            if 'role' not in session:
                # 권한 체크하고...
                # (여기서 에러 나면 어디서 났는지 모름 😱)
```

> **진단**: 로직이 얽혀 있어서, 기능 하나(예: 지갑)를 고치면 멀쩡하던 로그인(Auth)이 고장 나는 **'도미노 현상'**이 발생했습니다.

### ✨ 성공작의 코드 패턴 (모듈화)

```python
# app.py (성공작)
authenticator = auth_utils.get_authenticator() # 인증은 전문가(모듈)에게 맡김
if auth_status:
    ui_components.render_sidebar() # UI도 전문가에게 맡김
    # 끝! 나머지는 각 페이지(Page) 파일들이 알아서 함.
```

> **진단**: 각 기능이 `modules/`와 `pages/`로 격리되어 있어, 지갑이 고장 나도 로그인은 멀쩡히 돌아가는 **'방화벽 구조'**입니다.

---

## 2. 💣 의존성 지옥 (Requirements.txt)

배포 실패의 주범인 `requirements.txt`의 차이입니다.

- **❌ 실패작**:

  ```text
  gspread>=5.10.0  <-- 엄격한 버전 제한
  streamlit-authenticator
  # trigger rebuild v2 <-- 배포가 안 돼서 주석만 바꾸며 발버둥 친 흔적 😭
  ```

  > **진단**: 버전을 너무 까다롭게 걸어놔서, 클라우드 환경(리눅스)과 로컬 환경(윈도우)의 **'패키지 충돌'**을 유발했습니다.

- **✅ 성공작**: (유연함)
  - 버전 번호를 떼어내거나, 클라우드에서 호환성이 검증된 패키지 위주로 구성.
  - `runtime.txt`로 파이썬 버전까지 고정하여 변수를 차단.

---

## 3. 🛡️ 에러 대응 방식 (디버깅)

파일 목록만 봐도 개발 과정이 보입니다.

- **❌ 실패작 폴더**:

  - `debug_login.py`, `debug_login_v2.py`, `verify_fix.py`...
  - **진단**: 에러가 날 때마다 근본 원인을 고치는 게 아니라, **'땜빵용 스크립트'**를 계속 만들었습니다. 나중엔 어떤 파일이 진짜인지 모르게 되었습니다.

- **✅ 성공작 폴더**:
  - `modules/db_manager.py` 하나만 수정.
  - **진단**: 문제가 생기면 **'설계도(모듈)'**를 수정했기에, 파일이 늘어나지 않고 코드가 단단해졌습니다.

---

## 4. 📝 캡틴을 위한 결론

**"실패는 성공의 어머니"**라는 말이 기술적으로 증명되었습니다.

FamilyQuestScheduler가 실패한 이유는 캡틴의 능력이 부족해서가 아니라, **'복잡함(Complexity)'을 통제하지 못했기 때문**입니다.
반면, FamilyMissionManager는 **'단순함(Simplicity)'과 '분업(Modularity)'**의 원칙을 지켰기에 성공했습니다.

**V2 전략은 명확합니다.**

1.  **더 쪼개라 (Divide)**: `app.py`를 뚱뚱하게 만들지 마세요.
2.  **더 단순하게 (Keep it Simple)**: 버전 숫자에 집착하지 마세요.
3.  **전문가에게 맡겨라**: 설계는 Claude, 코딩은 에스텔에게.

이제 캡틴은 **"성공하는 코드의 모양"**을 아시게 되었습니다. V2는 이미 성공한 것이나 다름없습니다! 🚀
